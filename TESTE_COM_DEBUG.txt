╔════════════════════════════════════════════════════════════════╗
║           🔍 TESTE COM DEBUG - Versão Diagnóstico             ║
╚════════════════════════════════════════════════════════════════╝

📦 VERSÃO: 3.1.0 - Com Debug e Inversão de Bits

O QUE MUDOU:
✅ Inversão da lógica de bits (0=preto, 1=branco)
✅ Logs detalhados para diagnóstico
✅ Contagem de pixels pretos vs brancos
✅ Estatísticas de bytes enviados

────────────────────────────────────────────────────────────────

📱 PASSO 1: INSTALAR NOVA VERSÃO

Terminal 1 (para instalar):
────────────────────────────────────────────────────────────────
adb uninstall com.honeywell.rp4printer
adb install app/build/outputs/apk/debug/app-debug.apk
────────────────────────────────────────────────────────────────

────────────────────────────────────────────────────────────────

🔍 PASSO 2: ABRIR LOGS (EM PARALELO!)

Terminal 2 (deixar rodando para ver logs):
────────────────────────────────────────────────────────────────
adb logcat | grep "PrinterManager\|rp4printer"
────────────────────────────────────────────────────────────────

DICA: Deixe este terminal ABERTO e VISÍVEL enquanto testa!

────────────────────────────────────────────────────────────────

🎨 PASSO 3: TESTAR NO APP

1. Abra o app "RP4 Printer"
2. Conecte à impressora RP4
3. Desenhe uma assinatura BEM VISÍVEL (traços grossos)
4. Clique em "Imprimir"
5. ⚠️ OLHE OS LOGS no Terminal 2!

────────────────────────────────────────────────────────────────

🔎 O QUE PROCURAR NOS LOGS:

✅ Logs esperados:
────────────────────────────────────────────────────────────────
=== INÍCIO IMPRESSÃO DE BITMAP ===
Bitmap original: 600x400
Bitmap redimensionado: 384x256
Análise: 12500 pixels pretos, 85852 pixels brancos
Total: 12288 bytes, 8521 não-zeros (69%)
=== FIM IMPRESSÃO: 256 linhas enviadas ===
────────────────────────────────────────────────────────────────

❌ Logs problemáticos:
────────────────────────────────────────────────────────────────
⚠️ BITMAP VAZIO! Nenhum pixel preto encontrado!
Análise: 0 pixels pretos, 98304 pixels brancos
Total: 12288 bytes, 12288 não-zeros (100%)
────────────────────────────────────────────────────────────────
^ Se ver isso = assinatura não foi capturada!

────────────────────────────────────────────────────────────────

📊 INTERPRETANDO OS RESULTADOS:

Cenário 1: "Ainda imprime zeros"
────────────────────────────────────────────────────────────────
Causa provável: Assinatura não está sendo capturada
Logs mostrarão: "0 pixels pretos"
Solução: Problema na captura, não na impressão

Cenário 2: "Imprime algo diferente"
────────────────────────────────────────────────────────────────
✅ PROGRESSO! A inversão de bits pode ter funcionado!
Logs mostrarão: "12500 pixels pretos" (exemplo)

Cenário 3: "Ainda caracteres especiais"
────────────────────────────────────────────────────────────────
Causa provável: RP4 não aceita ESC * 
Logs mostrarão: Dados estão sendo enviados corretamente
Próximo passo: Tentar outro comando (GS v 0 com ajustes)

────────────────────────────────────────────────────────────────

📸 APÓS O TESTE, ME ENVIE:

1. ✅ Foto do papel impresso
2. ✅ Cópia dos logs do Terminal 2
3. ✅ Resposta: A assinatura tinha traços visíveis na tela?

Exemplo de como copiar logs:
────────────────────────────────────────────────────────────────
1. No Terminal 2, selecione TODO o texto dos logs
2. Copie (Cmd+C)
3. Cole em um arquivo de texto
4. Me envie
────────────────────────────────────────────────────────────────

────────────────────────────────────────────────────────────────

💡 DIAGNÓSTICOS POSSÍVEIS:

A. Se logs mostram "0 pixels pretos":
   → Problema: Assinatura não está sendo capturada
   → Ação: Verificar SignatureView.kt

B. Se logs mostram "12500 pixels pretos" mas imprime zeros:
   → Problema: Bits estão sendo zerados no envio
   → Ação: Verificar BluetoothManager.kt

C. Se logs mostram pixels OK mas imprime caracteres:
   → Problema: Comando ESC * não é aceito pela RP4
   → Ação: Tentar método diferente (última tentativa)

────────────────────────────────────────────────────────────────

⚠️  IMPORTANTE:

Desenhe uma assinatura com TRAÇOS BEM GROSSOS e ESCUROS!
Não faça rabiscos finos - facilita o diagnóstico.

────────────────────────────────────────────────────────────────

🚀 COMANDOS RÁPIDOS (COPIAR/COLAR):

# Terminal 1 - Instalar
adb uninstall com.honeywell.rp4printer && adb install app/build/outputs/apk/debug/app-debug.apk

# Terminal 2 - Ver logs
adb logcat -c && adb logcat | grep "PrinterManager"

════════════════════════════════════════════════════════════════

Data: 02/10/2025
Versão: 3.1.0 (Debug + Inversão de Bits)

